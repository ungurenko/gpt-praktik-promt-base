@tailwind base;
@tailwind components;
@tailwind utilities;

/* --- CSS Variables System --- */
:root {
  /* Light Mode (Default) */
  --bg-page-rgb: 253 251 247;      /* #FDFBF7 */
  --bg-card-rgb: 255 255 255;      /* #FFFFFF */
  
  --text-main-rgb: 17 17 17;       
  --text-secondary-rgb: 102 102 102;
  --text-muted-rgb: 168 162 158;   
  
  --border-color-rgb: 229 229 229; 
  --shadow-color: rgba(0, 0, 0, 0.03);
  
  --mesh-opacity: 0.8;
}

/* Use .dark class for compatibility with Tailwind 'class' mode */
:root.dark, [data-theme="dark"] {
  /* Dark Mode */
  --bg-page-rgb: 18 18 18;         
  --bg-card-rgb: 30 30 30; /* #1E1E1E */        

  --text-main-rgb: 255 255 255;    
  --text-secondary-rgb: 160 160 160; 
  --text-muted-rgb: 113 113 122;   

  --border-color-rgb: 42 42 42; /* #2A2A2A */  
  --shadow-color: rgba(0, 0, 0, 0.3);
  
  --mesh-opacity: 0.1; /* Reduced for better contrast */
}

/* Apply Background - Removed global transition on everything to speed up paint */
body {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background-color: rgb(var(--bg-page-rgb));
  color: rgb(var(--text-main-rgb));
  /* Only transition specific properties needed for theme switch */
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* Optimized Mesh Gradient - Reduced Blur */
.bg-mesh {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  z-index: -2; /* Moved further back */
  background: 
    radial-gradient(at 0% 0%, rgba(255, 228, 230, 0.4) 0px, transparent 50%),
    radial-gradient(at 100% 0%, rgba(254, 215, 170, 0.3) 0px, transparent 50%),
    radial-gradient(at 100% 100%, rgba(231, 229, 228, 0.5) 0px, transparent 50%),
    radial-gradient(at 0% 100%, rgba(255, 241, 242, 0.5) 0px, transparent 50%);
  /* Reduced blur for performance (60px -> 40px) */
  filter: blur(40px); 
  opacity: var(--mesh-opacity);
  transition: opacity 0.3s ease;
  /* GPU Acceleration Hacks */
  transform: translateZ(0);
  will-change: opacity;
  pointer-events: none;
  content-visibility: auto;
}

/* Noise Texture Overlay */
.bg-noise {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  z-index: -1;
  opacity: 0.08; 
  pointer-events: none;
  /* Optimized noise filter: Reduced numOctaves to 1 for significant performance boost */
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='1' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
}

:root.dark .bg-noise, [data-theme="dark"] .bg-noise {
  opacity: 0.05;
}

/* --- Clean Tech Card System --- */

.clean-card {
  background-color: rgb(var(--bg-card-rgb));
  border: 1px solid rgba(229, 229, 229, 0.8); 
  box-shadow: 0 4px 20px var(--shadow-color);
  position: relative;
  overflow: hidden;
  /* Use specific transitions, faster duration */
  transition: transform 0.2s cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 0.2s ease, border-color 0.2s ease;
  isolation: isolate; 
  /* GPU Hint */
  will-change: transform;
  transform: translateZ(0);
}

/* Dark Mode Card Styles */
:root.dark .clean-card, [data-theme="dark"] .clean-card {
  background-color: #1E1E1E !important;
  border: 1px solid #2A2A2A !important;
  box-shadow: none;
}

/* The Brand Glow (Magic Blob) */
.clean-card::before {
  content: '';
  position: absolute;
  width: 350px;
  height: 350px;
  background: radial-gradient(circle, rgba(255, 85, 0, 0.1) 0%, transparent 60%); 
  filter: blur(40px);
  border-radius: 50%;
  z-index: -1; 
  opacity: 0.6;
  transition: opacity 0.2s ease, transform 0.3s ease;
  pointer-events: none;
  /* GPU Hint */
  transform: translate3d(0,0,0); 
}

/* Theme Variants */
.theme-orange::before { background: radial-gradient(circle, rgba(255, 85, 0, 0.15) 0%, transparent 70%); }
.theme-rose::before { background: radial-gradient(circle, rgba(244, 63, 94, 0.15) 0%, transparent 70%); }
.theme-blue::before { background: radial-gradient(circle, rgba(59, 130, 246, 0.15) 0%, transparent 70%); }
.theme-violet::before { background: radial-gradient(circle, rgba(139, 92, 246, 0.15) 0%, transparent 70%); }
.theme-emerald::before { background: radial-gradient(circle, rgba(16, 185, 129, 0.15) 0%, transparent 70%); }
.theme-amber::before { background: radial-gradient(circle, rgba(245, 158, 11, 0.15) 0%, transparent 70%); }

/* Hover Effects */
.clean-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08); 
}

/* Dark Mode Hover Glow */
:root.dark .clean-card:hover, [data-theme="dark"] .clean-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 0 0 1px rgba(255, 107, 53, 0.3), 0 10px 30px rgba(0, 0, 0, 0.5) !important;
  border-color: rgba(255, 107, 53, 0.3) !important;
}

.theme-orange:hover { border-color: rgba(255, 85, 0, 0.3); }
.theme-rose:hover { border-color: rgba(244, 63, 94, 0.3); }
.theme-blue:hover { border-color: rgba(59, 130, 246, 0.3); }
.theme-violet:hover { border-color: rgba(139, 92, 246, 0.3); }
.theme-emerald:hover { border-color: rgba(16, 185, 129, 0.3); }
.theme-amber:hover { border-color: rgba(245, 158, 11, 0.3); }

.clean-card:hover::before {
  opacity: 0.8;
  transform: scale(1.05);
}

/* Glow Positioning */
.card-glow-0::before { top: -100px; right: -100px; }
.card-glow-1::before { bottom: -100px; right: -80px; }
.card-glow-2::before { top: 50%; right: -150px; transform: translateY(-50%); }
.card-glow-3::before { top: -100px; left: -50px; }
.card-glow-4::before { bottom: -80px; left: 10%; }

/* Soft Animations - Significantly Sped Up */
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes scaleIn {
  from { opacity: 0; transform: scale(0.97); }
  to { opacity: 1; transform: scale(1); }
}

.animate-enter {
  animation: fadeInUp 0.25s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
  opacity: 0;
  will-change: transform, opacity;
}

.animate-scale-in {
  animation: scaleIn 0.2s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
  opacity: 0;
}

/* Custom Scrollbar */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb {
  background: rgba(168, 162, 158, 0.3);
  border-radius: 10px;
}
::-webkit-scrollbar-thumb:hover { background: rgba(168, 162, 158, 0.5); }
